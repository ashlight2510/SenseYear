<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ë‚˜ëŠ” ëª‡ ë…„ìƒ ê°ì„±ì¸ê°€? ğŸµ</title>
    <meta
      name="description"
      content="12ê°€ì§€ ì§ˆë¬¸ìœ¼ë¡œ ì•Œì•„ë³´ëŠ” ë‚˜ì˜ ê°ì„± í…ŒìŠ¤íŠ¸"
    />
    <meta property="og:title" content="ë‚˜ëŠ” ëª‡ ë…„ìƒ ê°ì„±ì¸ê°€? ğŸµ" />
    <meta
      property="og:description"
      content="SNSì—ì„œ ê³µìœ ë˜ëŠ” ì¬ë¯¸ìˆëŠ” ê°ì„± í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤!"
    />
    <meta property="twitter:title" content="ë‚˜ëŠ” ëª‡ ë…„ìƒ ê°ì„±ì¸ê°€? ğŸµ" />
    <meta
      property="twitter:description"
      content="12ê°€ì§€ ì§ˆë¬¸ìœ¼ë¡œ ì•Œì•„ë³´ëŠ” ë‚˜ì˜ ê°ì„± í…ŒìŠ¤íŠ¸"
    />
    <link rel="icon" href="data:image/svg+xml,%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20viewBox%3D%270%200%20100%20100%27%3E%3Ctext%20y%3D%27.9em%27%20font-size%3D%2790%27%3E%F0%9F%8E%B5%3C/text%3E%3C/svg%3E" />
    <link
      rel="apple-touch-icon"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3EğŸµ%3C/text%3E%3C/svg%3E"
    />
    <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
          "Noto Sans KR", sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
        color: #333;
      }

      .container {
        max-width: 600px;
        margin: 16px auto;
        background: white;
        border-radius: 20px;
        padding: 40px 30px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      }
      .more-tests-btn {
        position: fixed;
        top: 18px;
        right: 18px;
        z-index: 1000;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 12px 16px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.25);
        background: linear-gradient(135deg, #111827 0%, #667eea 100%);
        color: #fff;
        font-weight: 700;
        font-size: 13px;
        letter-spacing: 0.2px;
        box-shadow: 0 12px 24px rgba(17, 24, 39, 0.25);
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease, opacity 0.2s ease;
      }
      .more-tests-btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 16px 30px rgba(17, 24, 39, 0.32);
      }
      .more-tests-btn:active {
        transform: translateY(0);
        opacity: 0.92;
      }
      @media (max-width: 640px) {
        .more-tests-btn {
          top: 12px;
          right: 12px;
          padding: 10px 12px;
          font-size: 12px;
        }
      }

      h1 {
        text-align: center;
        font-size: 28px;
        margin-bottom: 10px;
        color: #667eea;
      }

      .subtitle {
        text-align: center;
        color: #666;
        margin-bottom: 30px;
        font-size: 14px;
      }

      .question-container {
        display: none;
      }

      .question-container.active {
        display: block;
        animation: fadeIn 0.3s;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .question-number {
        font-size: 14px;
        color: #999;
        margin-bottom: 10px;
      }

      .question-text {
        font-size: 20px;
        font-weight: bold;
        margin-bottom: 25px;
        line-height: 1.5;
      }

      .option {
        background: #f8f9fa;
        border: 2px solid #e9ecef;
        border-radius: 12px;
        padding: 18px 20px;
        margin-bottom: 12px;
        cursor: pointer;
        transition: all 0.3s;
        font-size: 16px;
        line-height: 1.5;
      }

      .option:hover {
        background: #e9ecef;
        border-color: #667eea;
        transform: translateX(5px);
      }

      .option.selected {
        background: #667eea;
        color: white;
        border-color: #667eea;
      }

      .result-container {
        display: none;
        text-align: center;
      }

      .result-container.active {
        display: block;
        animation: fadeIn 0.5s;
      }

      .result-icon {
        font-size: 80px;
        margin-bottom: 20px;
      }

      .result-title {
        font-size: 24px;
        font-weight: bold;
        margin-bottom: 15px;
        color: #667eea;
      }

      .result-description {
        font-size: 18px;
        line-height: 1.8;
        margin-bottom: 20px;
        color: #555;
      }

      .result-details {
        background: #f8f9fa;
        border-radius: 12px;
        padding: 20px;
        margin: 20px 0;
        text-align: left;
      }

      .result-details li {
        margin: 10px 0;
        line-height: 1.6;
      }

      .result-tagline {
        font-size: 16px;
        font-weight: bold;
        color: #667eea;
        margin-top: 20px;
        padding: 15px;
        background: #f0f4ff;
        border-radius: 10px;
      }

      .share-section {
        margin-top: 40px;
        padding-top: 30px;
        border-top: 2px solid #e9ecef;
      }

      .share-title {
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 15px;
        color: #333;
      }

      .share-buttons {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .share-btn {
        background: #667eea;
        color: white;
        border: none;
        border-radius: 12px;
        padding: 16px 24px;
        font-size: 16px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }

      .share-btn:hover {
        background: #5568d3;
        transform: scale(1.02);
      }

      .share-btn.instagram {
        background: linear-gradient(
          45deg,
          #f09433 0%,
          #e6683c 25%,
          #dc2743 50%,
          #cc2366 75%,
          #bc1888 100%
        );
      }

      .share-btn.kakao {
        background: #fee500;
        color: #000;
      }

      .share-btn.link {
        background: #28a745;
      }

      .share-note {
        font-size: 12px;
        color: #999;
        margin-top: 10px;
        text-align: center;
      }

      .restart-btn {
        background: #6c757d;
        color: white;
        border: none;
        border-radius: 12px;
        padding: 14px 28px;
        font-size: 16px;
        font-weight: bold;
        cursor: pointer;
        margin-top: 20px;
        transition: all 0.3s;
      }

      .restart-btn:hover {
        background: #5a6268;
      }

      #resultCanvas {
        display: none;
      }

      .progress-bar {
        height: 4px;
        background: #e9ecef;
        border-radius: 2px;
        margin-bottom: 30px;
        overflow: hidden;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #667eea, #764ba2);
        transition: width 0.3s;
        width: 0%;
      }

      @media (max-width: 480px) {
        .container {
          padding: 30px 20px;
        }

        h1 {
          font-size: 24px;
        }

        .question-text {
          font-size: 18px;
        }

        .option {
          padding: 15px;
          font-size: 15px;
        }
      }

      footer {
        text-align: center;
        padding: 24px 20px;
        color: rgba(255, 255, 255, 0.8);
        margin-top: 40px;
      }

      footer a {
        color: rgba(255, 255, 255, 0.8);
        text-decoration: underline;
        transition: color 0.2s;
      }

      footer a:hover {
        color: rgba(255, 255, 255, 1);
      }

      footer p {
        margin: 0;
        font-size: 14px;
      }
    </style>
      <meta property="og:image" content="https://dummyimage.com/1200x630/1f2937/f9fafb&text=What+Year+Is+My+Vibe" />
    <meta property="og:image:alt" content="What Year Is My Vibe" />
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1204894220949193"
     crossorigin="anonymous"></script>
    <!-- responsive-base -->
    <style>
      /* responsive-base */
      *, *::before, *::after {
        box-sizing: border-box;
      }
      html {
        -webkit-text-size-adjust: 100%;
      }
      img,
      video,
      canvas,
      svg {
        max-width: 100%;
        height: auto;
      }
      table {
        width: 100%;
      }
      pre,
      code {
        white-space: pre-wrap;
        word-break: break-word;
      }
    </style>
  <style>
    .adsense-block {
      margin: 16px 0;
      display: flex;
      justify-content: center;
    }
    .adsbygoogle {
      display: block;
      margin: 16px auto;
        text-align: center;
}
  </style>
  <style>
    .lang-switch {
      display: inline-flex;
      gap: 6px;
      padding: 4px;
      border-radius: 999px;
      background: #111827;
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: #fff;
      margin: 0 auto 14px;
    }
    .lang-switch button {
      border: none;
      background: transparent;
      color: rgba(248, 250, 252, 0.7);
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 0.08em;
      padding: 6px 12px;
      border-radius: 999px;
      cursor: pointer;
    }
    .lang-switch button.active {
      background: #f472b6;
      color: #0b1120;
    }
    .share-hint {
      text-align: center;
      font-size: 0.9rem;
      color: #555;
      margin-bottom: 20px;
    }
  </style>
</head>
  <body>
    <div class="lang-switch" role="tablist" aria-label="Language switcher">
      <button type="button" data-lang="ko" class="active">í•œêµ­ì–´</button>
      <button type="button" data-lang="en">English</button>
    </div>
    <div class="container">
      <h1 id="heroTitle" data-i18n="heroTitle">ğŸµ ë‚˜ëŠ” ëª‡ ë…„ìƒ ê°ì„±ì¸ê°€? ğŸµ</h1>
      <p class="subtitle" id="heroSubtitle" data-i18n="heroSubtitle">
        12ê°€ì§€ ì§ˆë¬¸ìœ¼ë¡œ ì•Œì•„ë³´ëŠ” ë‚˜ì˜ ê°ì„± í…ŒìŠ¤íŠ¸
      </p>
      <p class="share-hint" id="shareHint" data-i18n="shareHint">
        ğŸ§ ì•„ë˜ ë²„íŠ¼ìœ¼ë¡œ ê°ì„± ê²°ê³¼ë¥¼ ê³µìœ í•´ë³´ì„¸ìš”.
      </p>

      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>

      <!-- ì§ˆë¬¸ ì˜ì—­ (ë™ì ìœ¼ë¡œ ë Œë”ë§ë¨) -->
      <div id="questionsArea"></div>

      <!-- ê²°ê³¼ ì˜ì—­ -->
      <div class="result-container" id="resultArea">
        <div class="result-icon" id="resultIcon"></div>
        <div class="result-title" id="resultTitle"></div>
        <div class="result-description" id="resultDescription"></div>
        <div class="result-details" id="resultDetails"></div>
        <div class="result-tagline" id="resultTagline"></div>

        <div class="share-section">
          <div class="share-title" id="shareTitle" data-i18n="shareTitle">
            ğŸ“± ì—¬ëŸ¬ë¶„ë„ í…ŒìŠ¤íŠ¸ í•´ë³´ì„¸ìš”! ğŸ‘‡
          </div>
          <div class="share-buttons">
            <button
              class="share-btn instagram"
              id="shareInstagramBtn"
              data-i18n="shareInstagramButton"
              onclick="shareToInstagram()"
            >
              ğŸ“¸ ì¸ìŠ¤íƒ€ ìŠ¤í† ë¦¬ ê³µìœ 
            </button>
            <button
              class="share-btn kakao"
              id="shareKakaoBtn"
              data-i18n="shareKakaoButton"
              onclick="shareToKakao()"
            >
              ğŸ’¬ ì¹´ì¹´ì˜¤í†¡ ì¹œêµ¬ì—ê²Œ ë³´ë‚´ê¸°
            </button>
            <button
              class="share-btn link"
              id="shareLinkBtn"
              data-i18n="shareLinkButton"
              onclick="copyLink()"
            >
              ğŸ”— ë§í¬ ë³µì‚¬í•˜ê¸°
            </button>
          </div>
          <p class="share-note" id="shareNote" data-i18n="shareNote">
            ğŸ’¡ ê²°ê³¼ ì´ë¯¸ì§€ ìë™ ìƒì„±ë©ë‹ˆë‹¤
          </p>
          <button class="restart-btn" id="restartBtn" data-i18n="restartButton" onclick="restartTest()">
            ğŸ”„ ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸°
          </button>
        </div>
      </div>
    </div>

    <footer>
      <p>
        Â© 2025
        <a href="mailto:ashlight2510@gmail.com">funnyfunny</a>
        -
        <a href="mailto:ashlight2510@gmail.com">AshLight</a>
      </p>
    </footer>

    <canvas id="resultCanvas" width="1080" height="1080"></canvas>

    <script>
      // Kakao SDK ì´ˆê¸°í™” (ì•± í‚¤ëŠ” ì‹¤ì œ ì‚¬ìš© ì‹œ ë°œê¸‰ë°›ì•„ì•¼ í•¨)
      // HTML íŒŒì¼ì„ ì§ì ‘ ì—´ë©´ file:// í”„ë¡œí† ì½œì´ë¼ ì¹´ì¹´ì˜¤ SDKê°€ ì‘ë™í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤
      // GitHub Pagesì— ë°°í¬í•˜ë©´ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤
      try {
        if (typeof Kakao !== "undefined") {
          // ì‹¤ì œ ë°°í¬ ì‹œ ë°œê¸‰ë°›ì€ í‚¤ë¡œ ë³€ê²½ í•„ìš”
          // ì¹´ì¹´ì˜¤í†¡ ê³µìœ ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ ì´ ë¶€ë¶„ì„ ì£¼ì„ ì²˜ë¦¬í•´ë„ ë©ë‹ˆë‹¤
          Kakao.init("YOUR_KAKAO_APP_KEY");
        }
      } catch (e) {
        console.log(
          "ì¹´ì¹´ì˜¤ SDK ë¡œë“œ ì‹¤íŒ¨ (ì„ íƒì‚¬í•­) - HTML íŒŒì¼ì„ ì§ì ‘ ì—´ë©´ ì‘ë™í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤"
        );
      }

      /* =========================
         Dynamic Quiz Engine v1 - ë²¡í„° ê°€ì¤‘ì¹˜ ë°©ì‹
         ========================= */

      const questionData = [
        {
          q: {
            ko: "ë‹¹ì‹ ì˜ ê°ì„± BGMì€ ë¬´ì—‡ì— ë” ê°€ê¹ë‚˜ìš”?",
            en: "Which vibe best matches your personal soundtrack?",
          },
          options: [
            {
              t: {
                ko: "ë¼ë””ì˜¤Â·ë°œë¼ë“œë¡œ ì¶”ì–µ ì†Œí™˜ (í•„ë¦„ê°ì„±)",
                en: "Radio ballads that conjure nostalgia (film vibe)",
              },
              v: { nineties: 3, zeros: 0, tens: 0, mz: 0 },
            },
            {
              t: {
                ko: "ì¼€ì´íŒ ëª…ê³¡ë“¤ë¡œ ì„¤ë ˜ ì €ì¥(00s~ì´ˆì°½ê¸° ì•„ì´ëŒ)",
                en: "Saving up excitement with K-pop classics (early 00s idols)",
              },
              v: { nineties: 1, zeros: 2, tens: 0, mz: 0 },
            },
            {
              t: {
                ko: "í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ì— ìš”ì¦˜ íˆíŠ¸ê³¡ì´ ê°€ë“",
                en: "My playlist is full of today's hits",
              },
              v: { nineties: 0, zeros: 0, tens: 2, mz: 1 },
            },
            {
              t: {
                ko: "í‹±í†¡/ë¦´ìŠ¤ íŠ¸ë Œë“œ ê³¡ë§Œ ë”°ë¼ë“£ê¸°",
                en: "Only following TikTok/Reels trends",
              },
              v: { nineties: 0, zeros: 0, tens: 1, mz: 3 },
            },
          ],
        },
        {
          q: {
            ko: "ì˜· ê³ ë¥¼ ë•Œ ë‹¹ì‹ ì˜ ìš°ì„ ìˆœìœ„ëŠ”?",
            en: "What matters most when you pick clothes?",
          },
          options: [
            {
              t: {
                ko: "ì¶”ì–µì„ ë– ì˜¬ë¦¬ê²Œ í•˜ëŠ” ì•„ì´í…œ(ë¹ˆí‹°ì§€)",
                en: "Pieces that spark memories (vintage)",
              },
              v: { nineties: 3, zeros: 0, tens: 0, mz: 0 },
            },
            {
              t: {
                ko: "ì¤‘ê³ ë‚˜ë¼/ì¥í„°ì—ì„œ ì°¾ëŠ” í¬ê·€í…œ",
                en: "Hunting rare finds on secondhand markets",
              },
              v: { nineties: 1, zeros: 2, tens: 0, mz: 0 },
            },
            {
              t: {
                ko: "ì¸í”Œë£¨ì–¸ì„œ ì½”ë””ë¥¼ ê·¸ëŒ€ë¡œ ë”°ë¼í•¨",
                en: "Copying influencer coordinates",
              },
              v: { nineties: 0, zeros: 1, tens: 2, mz: 1 },
            },
            {
              t: {
                ko: "í¸í•˜ê³  ê¸°ëŠ¥ì ì¸ ê²Œ ìµœê³ (í¸í•œê²Œ ì´ê¹€)",
                en: "Comfort and function win",
              },
              v: { nineties: 0, zeros: 0, tens: 1, mz: 3 },
            },
          ],
        },
        {
          q: {
            ko: "ì˜¤ë˜ëœ ì‚¬ì§„ì„ ë³´ë©´ ë‹¹ì‹ ì€?",
            en: "When you see old photos, you...",
          },
          options: [
            {
              t: {
                ko: "ë°”ë¡œ ê°ì„±ì— ì –ì–´ ì¶”ì–µíšŒìƒ",
                en: "Immediately dive into nostalgia",
              },
              v: { nineties: 3, zeros: 0, tens: 0, mz: 0 },
            },
            {
              t: {
                ko: "ì¶”ì–µì€ ì¦ê¸°ë˜ SNSì— ì˜¬ë ¤ ê³µìœ ",
                en: "Enjoy the memory and share it on SNS",
              },
              v: { nineties: 1, zeros: 2, tens: 0, mz: 0 },
            },
            {
              t: {
                ko: "í•„í„° ë³´ì •í•´ì„œ ì¬ì—…ë¡œë“œ",
                en: "Repost with fresh filters",
              },
              v: { nineties: 0, zeros: 1, tens: 2, mz: 0 },
            },
            {
              t: {
                ko: "ê·¸ëƒ¥ ì›ƒê³  ì§€ë‚˜ê°(ë°ˆìœ¼ë¡œ ë³€í™˜ ê°€ëŠ¥)",
                en: "Smile and move on (maybe turn it into a meme)",
              },
              v: { nineties: 0, zeros: 0, tens: 1, mz: 3 },
            },
          ],
        },
        {
          q: {
            ko: "ì¹œêµ¬ê°€ 'ë„ˆ ì§„ì§œ ëª‡ ë…„ìƒ ê°™ì€ë°?' ë¼ê³  í•˜ë©´ ë‹¹ì‹  ë°˜ì‘ì€?",
            en: "When friends say you feel like a certain generation, you...",
          },
          options: [
            {
              t: {
                ko: "'ë§ì•„â€¦ ê·¸ë•Œê°€ ì¢‹ì•˜ì§€' í•œìˆ¨ ì„ì–´ ì¸ì •",
                en: "Agree with a sigh: 'Yeah... it was better back then'",
              },
              v: { nineties: 3, zeros: 0, tens: 0, mz: 0 },
            },
            {
              t: {
                ko: "'ì•„ë‹˜ ë§ê³ ã…‹ã…‹' í•˜ë©° ì¥ë‚œìœ¼ë¡œ ë„˜ê¹€",
                en: "Brush it off jokingly: 'Whatever, lol'",
              },
              v: { nineties: 0, zeros: 2, tens: 1, mz: 0 },
            },
            {
              t: {
                ko: "'ì•„ë‹ˆì•¼ ê·¸ê±´ ì¢€ ì•„ë‹ˆì§€' ë‹¨í˜¸ ë¶€ì •",
                en: "Firmly say, 'No, that's not me'",
              },
              v: { nineties: 0, zeros: 0, tens: 2, mz: 1 },
            },
            {
              t: {
                ko: "ìƒˆ ë°ˆ ì†Œê°œí•˜ë©° ë¶„ìœ„ê¸° ì „í™˜",
                en: "Introduce a new meme to change the vibe",
              },
              v: { nineties: 0, zeros: 0, tens: 0, mz: 3 },
            },
          ],
        },
        {
          q: {
            ko: "ë‹¹ì‹ ì´ ê°€ì¥ ë¨¼ì € ì—´ì–´ë³´ëŠ” SNSëŠ”?",
            en: "Which social app do you open first?",
          },
          options: [
            {
              t: {
                ko: "ì‚¬ì§„Â·ê¸€ ìœ„ì£¼(ì¸ìŠ¤íƒ€ ì„±í–¥)",
                en: "Image/text-first (Instagram style)",
              },
              v: { nineties: 1, zeros: 1, tens: 2, mz: 0 },
            },
            {
              t: {
                ko: "ë©”ì‹ ì €/ì¹´í†¡ ì•Œë¦¼(ì†Œí†µí˜•)",
                en: "Messenger/Kakao notifications (social butterfly)",
              },
              v: { nineties: 0, zeros: 2, tens: 1, mz: 1 },
            },
            {
              t: {
                ko: "ì§§ì€ ì˜ìƒ(í‹±í†¡/ë¦´ìŠ¤) ë¬´í•œ ìŠ¤í¬ë¡¤",
                en: "Endless short-form videos (TikTok/Reels)",
              },
              v: { nineties: 0, zeros: 0, tens: 1, mz: 3 },
            },
            {
              t: {
                ko: "ê²Œì‹œíŒÂ·í¬ëŸ¼ì´ë‚˜ ì˜¤ë˜ëœ ì»¤ë®¤ë‹ˆí‹° íšŒìƒ",
                en: "Forums or old-school communities",
              },
              v: { nineties: 3, zeros: 0, tens: 0, mz: 0 },
            },
          ],
        },
        {
          q: {
            ko: "ê¸°ë¶„ ì•ˆ ì¢‹ì„ ë•Œ ë‹¹ì‹ ì˜ ì¹˜íŠ¸ ë°©ë²•ì€?",
            en: "Your go-to comfort when you feel down is...",
          },
          options: [
            {
              t: {
                ko: "ì¶”ì–µì˜ ë…¸ë˜ í‹€ê³  ê°ì„±ì— ì –ê¸°",
                en: "Play nostalgic songs and soak in the vibe",
              },
              v: { nineties: 3, zeros: 0, tens: 0, mz: 0 },
            },
            {
              t: {
                ko: "ê°„ì‹ ì‚¬ì„œ ë‹¬ë‹¬í•˜ê²Œ ìœ„ë¡œ",
                en: "Buy a treat and sweetly comfort yourself",
              },
              v: { nineties: 0, zeros: 2, tens: 0, mz: 1 },
            },
            {
              t: {
                ko: "ì›ƒê¸´ ë°ˆ/ì§¤ ì°¾ì•„ì„œ ì›ƒìŒìœ¼ë¡œ ì „í™˜",
                en: "Find funny memes/gifs to laugh",
              },
              v: { nineties: 0, zeros: 0, tens: 1, mz: 3 },
            },
            {
              t: {
                ko: "ì¹œêµ¬ì™€ ì¥í™©í•˜ê²Œ í†µí™”í•˜ë©° í† ë¡œ",
                en: "Talk it out with a long call",
              },
              v: { nineties: 0, zeros: 1, tens: 2, mz: 0 },
            },
          ],
        },
        {
          q: {
            ko: "ìœ í–‰ì— ëŒ€í•´ ë‹¹ì‹ ì€?",
            en: "What do you feel about trends?",
          },
          options: [
            {
              t: {
                ko: "'ê·¸ê±´ ë‚´ ì„¸ëŒ€ ê±°' ë¼ê³  í–¥ìˆ˜ ëŠë‚Œ",
                en: "Say, 'That was my generation!' with nostalgia",
              },
              v: { nineties: 3, zeros: 1, tens: 0, mz: 0 },
            },
            {
              t: {
                ko: "ìƒˆë¡œìš´ ê²ƒ ì¢‹ì•„í•˜ì§€ë§Œ ê³¨ë¼ ë“£ëŠ” í¸",
                en: "Like new stuff but pick selectively",
              },
              v: { nineties: 0, zeros: 2, tens: 1, mz: 0 },
            },
            {
              t: {
                ko: "ìœ í–‰ì€ ë¹ ë¥´ê²Œ í¡ìˆ˜í•œë‹¤",
                en: "Absorb trends as soon as they hit",
              },
              v: { nineties: 0, zeros: 0, tens: 2, mz: 1 },
            },
            {
              t: {
                ko: "ìœ í–‰ì„ ë§Œë“¤ì–´ë‚´ëŠ” ìª½ì¼ ë•Œê°€ ë§ìŒ",
                en: "Often the one creating the trend",
              },
              v: { nineties: 0, zeros: 0, tens: 0, mz: 3 },
            },
          ],
        },
        {
          q: {
            ko: "[ì£¼ì˜ë ¥ì²´í¬] ì§€ê¸ˆ ë³´ì´ëŠ” ë‹¨ì–´ ì¤‘ ì¢‹ì•„í•˜ëŠ” ê±¸ ëˆŒëŸ¬ì£¼ì„¸ìš”:",
            en: "Attention check: pick the word you like",
          },
          options: [
            {
              t: { ko: "ì˜›ë‚ ì‚¬ì§„", en: "Old photo" },
              v: { nineties: 0, zeros: 0, tens: 0, mz: 1 },
            },
            {
              t: { ko: "í”„ì‚¬", en: "Profile pic" },
              v: { nineties: 0, zeros: 0, tens: 0, mz: 1 },
            },
            {
              t: { ko: "ë¦´ìŠ¤", en: "Reels" },
              v: { nineties: 0, zeros: 0, tens: 0, mz: 1 },
            },
            {
              t: {
                ko: "ì§€ê¸ˆì€ í…ŒìŠ¤íŠ¸ ì§‘ì¤‘ ì¤‘",
                en: "Focused on the quiz right now",
              },
              v: { nineties: 0, zeros: 0, tens: 0, mz: 1 },
            },
          ],
        },
        {
          q: {
            ko: "'ì¶”ì–µíŒ”ì´' ì½˜í…ì¸ ë¥¼ ë³´ë©´ ë‹¹ì‹ ì€?",
            en: "When you see 'nostalgia farming' content, you...",
          },
          options: [
            {
              t: {
                ko: "ê·¸ ì‹œì ˆ ìƒê°ë‚˜ì„œ ë°”ë¡œ ê°íƒ„",
                en: "Gush, 'Oh that hits my era!'",
              },
              v: { nineties: 3, zeros: 1, tens: 0, mz: 0 },
            },
            {
              t: {
                ko: "ì˜›ë‚ ë„ ì¢‹ì§€ë§Œ ì§€ê¸ˆ ê²ƒë„ ê´œì°®ìŒ",
                en: "Appreciate the past, but the present is fine too",
              },
              v: { nineties: 0, zeros: 2, tens: 1, mz: 0 },
            },
            {
              t: {
                ko: "ë°ˆìœ¼ë¡œ ì¬í•´ì„í•´ì„œ ì›ƒìŒ í¬ì¸íŠ¸ë¡œ ì†Œë¹„",
                en: "Reinterpret it as a meme",
              },
              v: { nineties: 0, zeros: 0, tens: 1, mz: 3 },
            },
            {
              t: {
                ko: "ê·¸ëƒ¥ ìŠ¤í¬ë¡¤í•˜ë‹¤ ë§ê³  ì§€ë‚˜ê°",
                en: "Just scroll past",
              },
              v: { nineties: 0, zeros: 0, tens: 2, mz: 1 },
            },
          ],
        },
        {
          q: {
            ko: "ì¹œêµ¬ë“¤ê³¼ ëª¨ì´ë©´ ë‹¹ì‹ ì˜ ì—­í• ì€?",
            en: "When you're with friends, you usually...",
          },
          options: [
            {
              t: {
                ko: "ì˜›ë‚  ì´ì•¼ê¸°ë¡œ ë¶„ìœ„ê¸° ì¡°ì„±í•˜ëŠ” ì‚¬ëŒ",
                en: "Set the mood with old stories",
              },
              v: { nineties: 3, zeros: 0, tens: 0, mz: 0 },
            },
            {
              t: {
                ko: "ë¨¹ì„ê±°Â·í–‰ì‚¬ ì„­ì™¸ ë‹´ë‹¹(ì‹¤ìš©í˜•)",
                en: "Handle snacks/events (practical type)",
              },
              v: { nineties: 0, zeros: 2, tens: 0, mz: 1 },
            },
            {
              t: {
                ko: "ë°ˆÂ·ì§¤ë¡œ ëª¨ë‘ ì›ƒê¸°ëŠ” ì‚¬ëŒ",
                en: "Make everyone laugh with memes",
              },
              v: { nineties: 0, zeros: 0, tens: 1, mz: 3 },
            },
            {
              t: {
                ko: "ë¶„ìœ„ê¸° ê´€ì°° í›„ í•„ìš”í•œ íƒ€ì´ë°ì— ë§í•˜ëŠ” ì‚¬ëŒ",
                en: "Observe vibes and speak at the right moment",
              },
              v: { nineties: 0, zeros: 1, tens: 2, mz: 0 },
            },
          ],
        },
        {
          q: {
            ko: "ë§Œì•½ 'íƒ€ì„ë¨¸ì‹ 'ì´ ìˆë‹¤ë©´ ë‹¹ì‹ ì´ ê°€ì¥ ê°€ê³  ì‹¶ì€ ë•ŒëŠ”?",
            en: "If you had a time machine, you would go to...",
          },
          options: [
            {
              t: {
                ko: "90ë…„ëŒ€ ê·¸ ì‹œì ˆ ê°ì„± ì†ìœ¼ë¡œ",
                en: "The 90s nostalgia era",
              },
              v: { nineties: 3, zeros: 0, tens: 0, mz: 0 },
            },
            {
              t: {
                ko: "2000ë…„ëŒ€ ì´ˆë°˜ ì¶”ì–µì˜ ê±°ë¦¬",
                en: "Early 2000s streets of memories",
              },
              v: { nineties: 1, zeros: 2, tens: 0, mz: 0 },
            },
            {
              t: {
                ko: "2010ë…„ëŒ€ ê°ì„± í˜ìŠ¤í‹°ë²Œ",
                en: "2010s vibe festival",
              },
              v: { nineties: 0, zeros: 1, tens: 2, mz: 0 },
            },
            {
              t: {
                ko: "ë¯¸ë˜ íŠ¸ë Œë“œ ì²´í¬í•˜ëŸ¬(ìš”ì¦˜ ëŠë‚Œ)",
                en: "Check out future trends",
              },
              v: { nineties: 0, zeros: 0, tens: 1, mz: 3 },
            },
          ],
        },
        {
          q: {
            ko: "ë§ˆì§€ë§‰ìœ¼ë¡œ: ì¹œêµ¬ê°€ ì´ í…ŒìŠ¤íŠ¸ë¥¼ ê³µìœ í•˜ë©´ ë‹¹ì‹  ë°˜ì‘ì€?",
            en: "Finally: when a friend shares this quiz, you...",
          },
          options: [
            {
              t: {
                ko: "ë°”ë¡œ í•´ë³¸ë‹¤(ì¬ë¯¸ìˆìŒ)",
                en: "Jump in right away (sounds fun)",
              },
              v: { nineties: 0, zeros: 1, tens: 2, mz: 1 },
            },
            {
              t: {
                ko: "ìŠ¤í¬ë¦°ìƒ· ì°ì–´ì„œ ê°ì„± ë©˜ì…˜",
                en: "Screenshot and mention the vibe",
              },
              v: { nineties: 2, zeros: 0, tens: 0, mz: 0 },
            },
            {
              t: {
                ko: "ë§í¬ ë¶™ì—¬ì„œ ì¹œêµ¬ ì†Œí™˜(ë„ì „ ê¶Œìœ )",
                en: "Send the link and invite friends",
              },
              v: { nineties: 0, zeros: 1, tens: 0, mz: 3 },
            },
            {
              t: {
                ko: "ë„˜ê¸°ê³  ë°”ë¡œ ë‹¤ë¥¸ ê²ƒ ë´„",
                en: "Skip it and move on",
              },
              v: { nineties: 0, zeros: 0, tens: 1, mz: 1 },
            },
          ],
        },
      ];

      const resultTemplates = {
        nineties: {
          icon: "ğŸ§¡",
          title: { ko: "90ë…„ëŒ€ ê°ì„±", en: "90s Vibe" },
          description: {
            ko: "ë‹¹ì‹ ì˜ ê°ì„±ì€â€¦ í•„ë¦„ì¹´ë©”ë¼ì™€ ì‹¸ì´ì›”ë“œì˜ ì‹œëŒ€ë¥¼ ê±·ê³  ìˆìŠµë‹ˆë‹¤.",
            en: "Your vibe walks through the era of film cameras and Cyworld.",
          },
          details: {
            ko: [
              "í—â€¦ ë‹¹ì‹  <strong>ì¶”ì–µ ë¿œë¿œ ê°ì„± 1í‹°ì–´</strong>",
              "ë²„ì¦ˆ/SGì›Œë„ˆë¹„ ë…¸ë˜ ë‚˜ì˜¤ë©´ ë°”ë¡œ ê°ì • ëª°ì…",
              "ê°ì„±ìƒ·ì€ ë¬´ì¡°ê±´ <strong>ë”°ëœ»í•œ ë…¸ë€ í•„í„°</strong>",
              'ì¢…ì¢… "ìš”ì¦˜ ì• ë“¤â€¦" ì´ë¼ê³  ë§í•¨',
            ],
            en: [
              "You're top-tier nostalgia energy.",
              "Buzz/SG Wannabe tracks pull you in instantly.",
              "Every mood shot needs a warm yellow filter.",
              'You occasionally say, "Kids these days..."',
            ],
          },
          tagline: {
            ko: 'ğŸ“Œ ë‹¹ì‹ ê³¼ ì°°ë–¡ì¸ ë§: "ì¶”ì–µì´ ìµœê³ ì§€â€¦" ',
            en: 'ğŸ“Œ Tagline: "Nostalgia is the best..."',
          },
        },
        zeros: {
          icon: "ğŸ’›",
          title: { ko: "2000ë…„ëŒ€ ê°ì„±", en: "2000s Vibe" },
          description: {
            ko: "ë‹¹ì‹ ì€ 00ë…„ëŒ€ í•™êµ ì• ë–¡ë³¶ì´ ëƒ„ìƒˆ ë§¡ìœ¼ë©° ìë€ ê°ì„±ì…ë‹ˆë‹¤.",
            en: "You grew up with the smell of tteokbokki by the school gate.",
          },
          details: {
            ko: [
              'ì¹´í†¡ ë§íˆ¬ "ã…‹ã…‹ã…‹ã…‹" ê¸°ë°˜',
              "ì‹¸ì´ì›”ë“œë„ ê¸°ì–µë‚˜ëŠ”ë° ì¸ìŠ¤íƒ€ë„ ì˜í•¨",
              "ìƒˆ í° ì‚¬ë©´ í”„ì‚¬ 5ë¶„ë§ˆë‹¤ ë°”ê¿ˆ",
              "ê°ì„±ê³¼ ì›ƒê¹€ ì‚¬ì´ ì•„ìŠ¬ì•„ìŠ¬í•œ ê· í˜•í˜•",
            ],
            en: [
              'Your KakaoTalk tone is all "kkkkkk."',
              "You remember Cyworld but shine on Instagram too.",
              "New phone? You refresh your profile every five minutes.",
              "Balancing nostalgia and humor.",
            ],
          },
          tagline: { ko: 'ğŸ“Œ ë‹¹ì‹ ì˜ ì¸ìƒ ë°ˆ: "ì•„ë‹˜ ë§ê³  ã…‹ã…‹"', en: 'ğŸ“Œ Life meme: "Or not, lol"' },
        },
        tens: {
          icon: "ğŸ’™",
          title: { ko: "2010ë…„ëŒ€ ê°ì„±", en: "2010s Vibe" },
          description: {
            ko: "ë‹¹ì‹ ì€ ì¸ìŠ¤íƒ€ ê°ì„±ê³¼ í‹±í†¡ ì„¸ëŒ€ì˜ ì¤‘ê°„ì§€ëŒ€ì— ìˆìŠµë‹ˆë‹¤.",
            en: "You're standing between Instagram aesthetics and the TikTok generation.",
          },
          details: {
            ko: [
              "ì¸ìŠ¤íƒ€ê°€ ê³§ ì¼ê¸°ì¥",
              "ìŠ¤í† ë¦¬ëŠ” 24ì‹œê°„ë§ˆë‹¤ ì—…ë°ì´íŠ¸",
              "ë°ˆ ì €ì¥í•´ë‘ê³  ì¹œêµ¬ì—ê²Œ ë°”ë¡œ ë¿Œë¦¼",
              "ê°ì„±ìƒ·ë„ ì°°ì¹µ, ë°ˆë„ ì°°ì¹µ í•˜ëŠ” í˜¼ì¢…í˜•",
            ],
            en: [
              "Instagram is basically your diary.",
              "Stories update every 24 hours.",
              "Save a meme and share it immediately.",
              "Capture both aesthetic shots and memes.",
            ],
          },
          tagline: {
            ko: 'ğŸ“Œ í•œ ì¤„ ìš”ì•½: "ë‚˜ëŠ” í˜„íƒ€ì™€ ê°ì„±ì„ ë™ì‹œì— ê°–ì¶˜ ì‚¬ëŒ"',
            en: 'ğŸ“Œ Summary: "I balance reality-checks and vibes."',
          },
        },
        mz: {
          icon: "ğŸ’œ",
          title: { ko: "MZ ë¯¹ìŠ¤ ê°ì„±", en: "MZ Hybrid Vibe" },
          description: {
            ko: "ë‹¹ì‹ ì€ ìœ í–‰ì—ë„ ë¹ ë¥´ê³ , ê°ì„±ì—ë„ ë¹ ë¥¸ í•˜ì´ë¸Œë¦¬ë“œ!",
            en: "You're a hybrid who grabs trends fast and feels vibe even faster.",
          },
          details: {
            ko: [
              "íŠ¸ë Œë“œ ìŠµë“ ì†ë„ ìµœìƒìœ„",
              "í‹±í†¡ì—ì„œ ë­ ëœ¨ë©´ ë°”ë¡œ ë”°ë¼í•¨",
              "ë°ˆì€ êµ­ë£°",
              "ë‚¨ ëˆˆì¹˜ ì•ˆ ë³´ê³  ìê¸° ìŠ¤íƒ€ì¼ëŒ€ë¡œ ì¦ê¹€",
            ],
            en: [
              "Top speed at picking up trends.",
              "Copy whatever's trending on TikTok.",
              "Memes are rule number one.",
              "Enjoy your style without caring about the crowd.",
            ],
          },
          tagline: {
            ko: 'ğŸ“Œ ì •ì²´ì„±: "ê·¸ë•Œê·¸ë•Œ ë‹¬ë¼ìš”"',
            en: 'ğŸ“Œ Identity: "It depends on the moment."',
          },
        },
        mixed: {
          icon: "âœ¨",
          title: { ko: "ë¯¹ìŠ¤í˜• ê°ì„±", en: "Blended Vibe" },
          description: {
            ko: "ì—¬ëŸ¬ ì‹œëŒ€ê°€ ì„ì—¬ ìˆëŠ” ìœ ì—°í•œ ê°ì„±ì…ë‹ˆë‹¤.",
            en: "A flexible vibe mixing many eras.",
          },
          details: {
            ko: [
              "ë‹¤ì–‘í•œ ì·¨í–¥ì„ ê°€ì§„ ì†Œìœ ì",
              "ìƒí™©ì— ë”°ë¼ ë‹¬ë¼ì§€ëŠ” ê°ì„±",
              "ê³ ì •ê´€ë… ì—†ëŠ” ììœ ë¡œìš´ ìŠ¤íƒ€ì¼",
              "ëª¨ë“  ì‹œëŒ€ì˜ ì¢‹ì€ ì ì„ ì„ì–´ëƒ„",
            ],
            en: [
              "Owner of diverse tastes.",
              "Your vibe shifts per moment.",
              "Style without fixed notions.",
              "Mixes the best from every era.",
            ],
          },
          tagline: {
            ko: 'ğŸ“Œ ë‹¹ì‹ ì˜ íŠ¹ì§•: "ìœ ì—°í•˜ê³  ë‹¤ì–‘í•´ìš”"',
            en: 'ğŸ“Œ You are versatile and open-minded.',
          },
        },
      };

      const translations = {
        ko: {
          metaTitle: "ë‚˜ëŠ” ëª‡ ë…„ìƒ ê°ì„±ì¸ê°€? ğŸµ",
          metaDescription: "SNSì—ì„œ ê³µìœ ë˜ëŠ” ì¬ë¯¸ìˆëŠ” ê°ì„± í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤!",
          heroTitle: "ğŸµ ë‚˜ëŠ” ëª‡ ë…„ìƒ ê°ì„±ì¸ê°€? ğŸµ",
          heroSubtitle: "12ê°€ì§€ ì§ˆë¬¸ìœ¼ë¡œ ì•Œì•„ë³´ëŠ” ë‚˜ì˜ ê°ì„± í…ŒìŠ¤íŠ¸",
          shareHint: "ğŸ§ ì•„ë˜ ë²„íŠ¼ìœ¼ë¡œ ê°ì„± ê²°ê³¼ë¥¼ ê³µìœ í•´ë³´ì„¸ìš”.",
          shareTitle: "ğŸ“± ì—¬ëŸ¬ë¶„ë„ í…ŒìŠ¤íŠ¸ í•´ë³´ì„¸ìš”! ğŸ‘‡",
          shareInstagramButton: "ğŸ“¸ ì¸ìŠ¤íƒ€ ìŠ¤í† ë¦¬ ê³µìœ ",
          shareKakaoButton: "ğŸ’¬ ì¹´ì¹´ì˜¤í†¡ ì¹œêµ¬ì—ê²Œ ë³´ë‚´ê¸°",
          shareLinkButton: "ğŸ”— ë§í¬ ë³µì‚¬í•˜ê¸°",
          shareNote: "ğŸ’¡ ê²°ê³¼ ì´ë¯¸ì§€ ìë™ ìƒì„±ë©ë‹ˆë‹¤",
          restartButton: "ğŸ”„ ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸°",
          questionLabel: "ì§ˆë¬¸ {current}/{total}",
          resultConfidenceLine:
            "ì‹ ë¢°ë„: {confidence}% Â· ì ìˆ˜: N{nineties} Z{zeros} T{tens} M{mz}",
          alertNoResult: "ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ë¥¼ ì™„ë£Œí•´ì£¼ì„¸ìš”.",
          alertImageDownloaded:
            "ğŸ“¸ ì´ë¯¸ì§€ê°€ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!\nì¸ìŠ¤íƒ€ ìŠ¤í† ë¦¬ì— ì—…ë¡œë“œí•´ì£¼ì„¸ìš”!",
          alertImageError:
            "ì´ë¯¸ì§€ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.",
          alertCopySuccess:
            "âœ… ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!\nì¹´ì¹´ì˜¤í†¡ì— ë¶™ì—¬ë„£ê¸° í•´ì£¼ì„¸ìš”!",
          alertCopyFail: "ë§í¬ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ë³µì‚¬í•´ì£¼ì„¸ìš”:\n\n{text}",
          alertCopyLinkSuccess: "âœ… ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!",
          shareBody:
            "ë‚˜ëŠ” {title}! ğŸµ\n\n{description}\n\në‚˜ë„ í…ŒìŠ¤íŠ¸ í•´ë´! ğŸ‘‡\n{url}",
          shareKakaoButtonTitle: "í…ŒìŠ¤íŠ¸ í•˜ê¸°",
          resultImagePrefix: "ë‚˜ëŠ”",
          resultImageCallToAction: "í…ŒìŠ¤íŠ¸ í•˜ëŸ¬ ê°€ê¸° â†’",
          moreTestsButton: "ë” ë§ì€ í…ŒìŠ¤íŠ¸ í•´ë³´ê¸°",
        },
        en: {
          metaTitle: "What Year Is My Vibe? ğŸµ",
          metaDescription: "A fun vibe quiz to share on SNS.",
          heroTitle: "ğŸµ What Year Is My Vibe? ğŸµ",
          heroSubtitle: "12 questions to discover your vibe.",
          shareHint: "Use the buttons below to share your results.",
          shareTitle: "ğŸ“± Share your vibe! ğŸ‘‡",
          shareInstagramButton: "ğŸ“¸ Share to Instagram Story",
          shareKakaoButton: "ğŸ’¬ Send via KakaoTalk",
          shareLinkButton: "ğŸ”— Copy link",
          shareNote: "ğŸ’¡ Image auto-generated for you",
          restartButton: "ğŸ”„ Try again",
          questionLabel: "Question {current}/{total}",
          resultConfidenceLine:
            "Confidence: {confidence}% Â· Score: N{nineties} Z{zeros} T{tens} M{mz}",
          alertNoResult: "No result yet. Finish the quiz first.",
          alertImageDownloaded:
            "ğŸ“¸ Image downloaded! Share it on your story.",
          alertImageError: "Image generation failed. Please try again.",
          alertCopySuccess: "âœ… Link copied! Paste it into KakaoTalk!",
          alertCopyFail: "Please copy the link manually:\n\n{text}",
          alertCopyLinkSuccess: "âœ… Link copied!",
          shareBody:
            "I'm {title}! ğŸµ\n\n{description}\n\nTry it out! ğŸ‘‡\n{url}",
          shareKakaoButtonTitle: "Try the quiz",
          resultImagePrefix: "I'm",
          resultImageCallToAction: "Take the quiz â†’",
          moreTestsButton: "Try more quizzes",
        },
      };

      const supportedLangs = ["ko", "en"];
      const defaultLang = "ko";
      let currentLang = defaultLang;
      const LANG_STORAGE_KEY = "senseyear_lang";

      function localizeString(value) {
        if (!value) return "";
        if (typeof value === "string") return value;
        return value[currentLang] ?? value.ko ?? "";
      }

      function localizeArray(value) {
        if (!value) return [];
        return value[currentLang] ?? value.ko ?? [];
      }

      function t(key, vars = {}) {
        const langMap = translations[currentLang] || translations.ko;
        let template = langMap[key] || translations.ko[key] || key;
        if (typeof template !== "string") return template;
        return template.replace(/\{(\w+)\}/g, (_, name) =>
          vars[name] !== undefined ? vars[name] : ""
        );
      }

      function detectLang() {
        const url = new URL(window.location.href);
        const paramLang = url.searchParams.get("lang");
        if (supportedLangs.includes(paramLang)) return paramLang;
        const stored = localStorage.getItem(LANG_STORAGE_KEY);
        if (supportedLangs.includes(stored)) return stored;
        const browserLang =
          navigator.languages && navigator.languages.length
            ? navigator.languages[0]
            : navigator.language;
        if (browserLang && browserLang.toLowerCase().startsWith("ko")) {
          return "ko";
        }
        return defaultLang;
      }

      function updateMetaTags(lang) {
        const meta = translations[lang] || translations.ko;
        if (meta) {
          document.title = meta.metaTitle;
          const setMeta = (selector, value) => {
            const el = document.querySelector(selector);
            if (el) el.setAttribute("content", value);
          };
          setMeta('meta[name="description"]', meta.metaDescription);
          setMeta('meta[property="og:title"]', meta.metaTitle);
          setMeta('meta[property="og:description"]', meta.metaDescription);
          setMeta('meta[property="twitter:title"]', meta.metaTitle);
          setMeta('meta[property="twitter:description"]', meta.metaDescription);
        }
      }

      function updateStaticText() {
        document.querySelectorAll("[data-i18n]").forEach((el) => {
          const key = el.getAttribute("data-i18n");
          if (key) {
            el.textContent = t(key);
          }
        });
      }

      function updateLangButtons(lang) {
        document.querySelectorAll(".lang-switch button").forEach((btn) => {
          btn.classList.toggle("active", btn.dataset.lang === lang);
        });
      }

      function updateQuestionTexts() {
        const containers = document.querySelectorAll(".question-container");
        containers.forEach((container) => {
          const idx = Number(container.dataset.question);
          const question = questionData[idx];
          if (!question) return;
          const numberEl = container.querySelector(".question-number");
          if (numberEl) {
            numberEl.textContent = t("questionLabel", {
              current: idx + 1,
              total: questionData.length,
            });
          }
          const textEl = container.querySelector(".question-text");
          if (textEl) {
            textEl.textContent = localizeString(question.q);
          }
          const options = container.querySelectorAll(".option");
          options.forEach((optEl, oi) => {
            const optionData = question.options[oi];
            if (optionData) {
              optEl.textContent = localizeString(optionData.t);
            }
          });
        });
      }

      function updateResultDisplay() {
        if (!window.currentResult) return;
        const template = window.currentResult.template;
        if (!template) return;
        document.getElementById("resultIcon").textContent = template.icon;
        document.getElementById("resultTitle").textContent = localizeString(
          template.title
        );
        document.getElementById("resultDescription").textContent =
          localizeString(template.description);
        const details = localizeArray(template.details);
        const detailsHtml =
          "<ul>" + details.map((d) => `<li>${d}</li>`).join("") + "</ul>";
        document.getElementById("resultDetails").innerHTML = detailsHtml;
        document.getElementById("resultTagline").innerHTML = `${localizeString(
          template.tagline
        )}<br><small style="color: #999; font-weight: normal;">${t(
          "resultConfidenceLine",
          {
            confidence: window.currentResult.confidence ?? 0,
            nineties: window.currentResult.score.nineties,
            zeros: window.currentResult.score.zeros,
            tens: window.currentResult.score.tens,
            mz: window.currentResult.score.mz,
          }
        )}</small>`;
      }

      function applyTranslations(lang) {
        currentLang = lang;
        document.documentElement.lang = lang;
        updateMetaTags(lang);
        updateStaticText();
        updateQuestionTexts();
        updateResultDisplay();
        updateLangButtons(lang);
      }

      function setLang(lang, { persist = true, updateUrl = true } = {}) {
        const next = supportedLangs.includes(lang) ? lang : defaultLang;
        if (persist) {
          localStorage.setItem(LANG_STORAGE_KEY, next);
        }
        if (updateUrl) {
          const url = new URL(window.location.href);
          url.searchParams.set("lang", next);
          window.history.replaceState({}, "", url.toString());
        }
        applyTranslations(next);
      }

      document.querySelectorAll(".lang-switch button").forEach((btn) => {
        btn.addEventListener("click", () => {
          setLang(btn.dataset.lang, { persist: true, updateUrl: true });
        });
      });

      // utility: shuffle array
      function shuffle(a) {
        for (let i = a.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [a[i], a[j]] = [a[j], a[i]];
        }
      }

      // DOM ìš”ì†Œ
      const questionsArea = document.getElementById("questionsArea");
      const progressFill = document.getElementById("progressFill");
      const resultArea = document.getElementById("resultArea");

      let currentIndex = 0;
      let answers = []; // store chosen option index per question
      let accum = { nineties: 0, zeros: 0, tens: 0, mz: 0 };

      // OPTIONAL: shuffle questions & options for variance
      shuffle(questionData);
      questionData.forEach((q) => shuffle(q.options));

      function renderQuestion(idx) {
        questionsArea.innerHTML = ""; // clear

        const q = questionData[idx];
        const container = document.createElement("div");
        container.className = "question-container active";
        container.dataset.question = idx;

        const questionNumber = document.createElement("div");
        questionNumber.className = "question-number";
        questionNumber.textContent = t("questionLabel", {
          current: idx + 1,
          total: questionData.length,
        });

        const questionText = document.createElement("div");
        questionText.className = "question-text";
        questionText.textContent = localizeString(q.q);

        container.appendChild(questionNumber);
        container.appendChild(questionText);

        q.options.forEach((opt, oi) => {
          const div = document.createElement("div");
          div.className = "option";
          div.textContent = localizeString(opt.t);
          div.dataset.questionIndex = idx;
          div.dataset.optionIndex = oi;
          div.addEventListener("click", () => selectOption(idx, oi));
          container.appendChild(div);
        });

        questionsArea.appendChild(container);
        updateProgressUI(idx);
      }

      function selectOption(qIdx, optIdx) {
        // mark answer
        answers[qIdx] = optIdx;

        // add weights
        const v = questionData[qIdx].options[optIdx].v;
        accum.nineties += v.nineties || 0;
        accum.zeros += v.zeros || 0;
        accum.tens += v.tens || 0;
        accum.mz += v.mz || 0;

        // visual feedback
        const container = document.querySelector(".question-container.active");
        const options = container.querySelectorAll(".option");
        options.forEach((opt) => opt.classList.remove("selected"));
        options[optIdx].classList.add("selected");

        // move next after tiny delay for UX
        setTimeout(() => {
          if (qIdx < questionData.length - 1) {
            renderQuestion(qIdx + 1);
            currentIndex = qIdx + 1;
          } else {
            computeAndShowResult();
          }
        }, 350);
      }

      function updateProgressUI(idx) {
        const progress = ((idx + 1) / questionData.length) * 100;
        if (progressFill) progressFill.style.width = progress + "%";
      }

      function computeAndShowResult() {
        // pick max vector value
        const scores = [
          { key: "nineties", v: accum.nineties },
          { key: "zeros", v: accum.zeros },
          { key: "tens", v: accum.tens },
          { key: "mz", v: accum.mz },
        ];

        scores.sort((a, b) => b.v - a.v);
        const top = scores[0];
        const runnerUp = scores[1];

        // confidence: gap between top and runnerUp
        const gap = top.v - runnerUp.v;
        const total = accum.nineties + accum.zeros + accum.tens + accum.mz;
        const confidence = Math.round((gap / Math.max(1, total)) * 100);

        let resultType = top.key;

        // if gap very small, we can show "mixed" result
        if (gap <= 2) {
          resultType = "mixed";
        }

        // build result data mapping
        const resultTemplate = resultTemplates[resultType];
        if (!resultTemplate) return;

        const scoreSnapshot = {
          nineties: accum.nineties,
          zeros: accum.zeros,
          tens: accum.tens,
          mz: accum.mz,
        };

        window.currentResult = {
          type: resultType,
          template: resultTemplate,
          score: scoreSnapshot,
          confidence,
        };

        // hide questions area, show result area
        questionsArea.style.display = "none";
        resultArea.classList.add("active");

        updateResultDisplay();
      }

      function restartTest() {
        // reset
        questionsArea.style.display = "block";
        resultArea.classList.remove("active");
        currentIndex = 0;
        answers = [];
        accum = { nineties: 0, zeros: 0, tens: 0, mz: 0 };

        // shuffle again for variance
        shuffle(questionData);
        questionData.forEach((q) => shuffle(q.options));

        renderQuestion(0);
      }

      // start
      renderQuestion(0);
      setLang(detectLang(), { persist: true, updateUrl: false });

      // ê²°ê³¼ ì´ë¯¸ì§€ ìƒì„±
      function generateResultImage() {
        return new Promise((resolve) => {
          const canvas = document.getElementById("resultCanvas");
          const ctx = canvas.getContext("2d");
          const result = window.currentResult;

          // ë°°ê²½ ê·¸ë¼ë°ì´ì…˜
          const gradient = ctx.createLinearGradient(0, 0, 1080, 1080);
          if (result.type === "nineties" || result.type === "90s") {
            gradient.addColorStop(0, "#ff9a56");
            gradient.addColorStop(1, "#ff6a88");
          } else if (result.type === "zeros" || result.type === "00s") {
            gradient.addColorStop(0, "#fad961");
            gradient.addColorStop(1, "#f76b1c");
          } else if (result.type === "tens" || result.type === "10s") {
            gradient.addColorStop(0, "#667eea");
            gradient.addColorStop(1, "#764ba2");
          } else if (result.type === "mixed") {
            gradient.addColorStop(0, "#a8edea");
            gradient.addColorStop(0.5, "#fed6e3");
            gradient.addColorStop(1, "#fbc2eb");
          } else {
            gradient.addColorStop(0, "#a8edea");
            gradient.addColorStop(1, "#fed6e3");
          }
          ctx.fillStyle = gradient;
          ctx.fillRect(0, 0, 1080, 1080);

          // ìƒë‹¨ ì œëª©
          if (!result || !result.template) {
            throw new Error("No result to render");
          }
          const localizedTitle = localizeString(result.template.title);
          const localizedDescription = localizeString(result.template.description);
          const localizedTagline = localizeString(result.template.tagline);

          ctx.fillStyle = "white";
          ctx.font = "bold 72px -apple-system, BlinkMacSystemFont, sans-serif";
          ctx.textAlign = "center";
          ctx.shadowColor = "rgba(0, 0, 0, 0.3)";
          ctx.shadowBlur = 10;
          ctx.fillText(t("resultImagePrefix"), 540, 180);

          // ë©”ì¸ íƒ€ì´í‹€
          ctx.font = "bold 96px -apple-system, BlinkMacSystemFont, sans-serif";
          ctx.fillText(`${localizedTitle}!`, 540, 280);
          ctx.shadowBlur = 0;

          // ì•„ì´ì½˜ (ë” í¬ê²Œ)
          ctx.font = "200px Arial";
          ctx.fillText(result.template.icon, 540, 480);

          // ì„¤ëª… í…ìŠ¤íŠ¸ (ì¤„ë°”ê¿ˆ ì²˜ë¦¬)
          ctx.font = "48px -apple-system, BlinkMacSystemFont, sans-serif";
          ctx.fillStyle = "rgba(255, 255, 255, 0.95)";
          const description = localizedDescription;
          const maxWidth = 900;
          const lineHeight = 70;
          let y = 650;

          // í…ìŠ¤íŠ¸ ì¤„ë°”ê¿ˆ (í•œê¸€ ì²˜ë¦¬)
          const words = description.split("");
          let line = "";
          for (let n = 0; n < words.length; n++) {
            const testLine = line + words[n];
            const metrics = ctx.measureText(testLine);
            if (metrics.width > maxWidth && n > 0) {
              ctx.fillText(line, 540, y);
              line = words[n];
              y += lineHeight;
            } else {
              line = testLine;
            }
          }
          ctx.fillText(line, 540, y);

          // íƒœê·¸ë¼ì¸
          ctx.font = "bold 56px -apple-system, BlinkMacSystemFont, sans-serif";
          ctx.fillStyle = "#FFD700";
          ctx.shadowColor = "rgba(0, 0, 0, 0.2)";
          ctx.shadowBlur = 5;
          const tagline = localizedTagline.replace(/ğŸ“Œ.*?:\s*/, "");
          ctx.fillText(tagline, 540, 820);
          ctx.shadowBlur = 0;

          // ì‹ ë¢°ë„ í‘œì‹œ
          if (result.confidence !== undefined) {
            ctx.font =
              "bold 48px -apple-system, BlinkMacSystemFont, sans-serif";
            ctx.fillStyle = "rgba(255, 255, 255, 0.9)";
            ctx.shadowColor = "rgba(0, 0, 0, 0.3)";
            ctx.shadowBlur = 5;
            ctx.fillText(
              t("resultConfidenceLine", {
                confidence: result.confidence,
                nineties: result.score.nineties,
                zeros: result.score.zeros,
                tens: result.score.tens,
                mz: result.score.mz,
              }),
              540,
              890
            );
            ctx.shadowBlur = 0;
          }

          // í•˜ë‹¨ êµ¬ë¶„ì„ 
          ctx.strokeStyle = "rgba(255, 255, 255, 0.3)";
          ctx.lineWidth = 2;
          ctx.beginPath();
          ctx.moveTo(200, 950);
          ctx.lineTo(880, 950);
          ctx.stroke();

          // í•˜ë‹¨ ë§í¬
          ctx.fillStyle = "rgba(255, 255, 255, 0.9)";
          ctx.font = "bold 42px -apple-system, BlinkMacSystemFont, sans-serif";
          ctx.fillText(t("resultImageCallToAction"), 540, 1000);
          ctx.font = "36px -apple-system, BlinkMacSystemFont, sans-serif";
          ctx.fillStyle = "rgba(255, 255, 255, 0.7)";
          const url = window.location.href
            .replace("http://", "")
            .replace("https://", "");
          ctx.fillText(url, 540, 1040);

          // ì´ë¯¸ì§€ ë°ì´í„° ë°˜í™˜ (toDataURL ì‚¬ìš©)
          const dataUrl = canvas.toDataURL("image/png");
          resolve(dataUrl);
        });
      }

      // ì¸ìŠ¤íƒ€ ìŠ¤í† ë¦¬ ê³µìœ 
      async function shareToInstagram() {
        try {
          if (!window.currentResult) {
            alert(t("alertNoResult"));
            return;
          }

          const imageDataUrl = await generateResultImage();
          const url = window.location.href;
          const result = window.currentResult;
          const localizedTitle = localizeString(result.template.title);
          const localizedDescription = localizeString(result.template.description);
          const shareText = t("shareBody", {
            title: localizedTitle,
            description: localizedDescription,
            url,
          });

          // ëª¨ë°”ì¼ Web Share API ì‹œë„
          if (navigator.share && navigator.canShare) {
            try {
              // ì´ë¯¸ì§€ë¥¼ Blobìœ¼ë¡œ ë³€í™˜
              const response = await fetch(imageDataUrl);
              const blob = await response.blob();
              const filename = `${localizedTitle
                .replace(/\s+/g, "-")
                .toLowerCase()}-vibe.png`;
              const file = new File([blob], filename, { type: "image/png" });

              if (navigator.canShare({ files: [file] })) {
                await navigator.share({
                  files: [file],
                  title: localizedTitle,
                  text: shareText,
                });
                return;
              }
            } catch (shareError) {
              console.log("Web Share API ì‹¤íŒ¨, ë‹¤ìš´ë¡œë“œë¡œ ëŒ€ì²´");
            }
          }

          // ë‹¤ìš´ë¡œë“œ ë°©ì‹ (ë°ìŠ¤í¬í†± ë° í´ë°±)
          const link = document.createElement("a");
          link.download = `${localizedTitle
            .replace(/\s+/g, "-")
            .toLowerCase()}-vibe.png`;
          link.href = imageDataUrl;
          link.style.display = "none";
          document.body.appendChild(link);
          link.click();

          setTimeout(() => {
            document.body.removeChild(link);
            alert(t("alertImageDownloaded"));
          }, 100);
        } catch (error) {
          console.error("ì´ë¯¸ì§€ ìƒì„± ì˜¤ë¥˜:", error);
          alert(t("alertImageError"));
        }
      }

      // ì¹´ì¹´ì˜¤í†¡ ê³µìœ 
      async function shareToKakao() {
        const result = window.currentResult;
        if (!result) {
          alert(t("alertNoResult"));
          return;
        }

        const url = window.location.href;
        const localizedTitle = localizeString(result.template.title);
        const localizedDescription = localizeString(result.template.description);
        const shareText = t("shareBody", {
          title: localizedTitle,
          description: localizedDescription,
          url,
        });

        // ëª¨ë°”ì¼ Web Share API ì‹œë„ (ì¹´ì¹´ì˜¤í†¡ ì•±ì´ ìˆìœ¼ë©´ ìë™ìœ¼ë¡œ ì—´ë¦¼)
        if (navigator.share) {
          try {
            await navigator.share({
              title: localizedTitle,
              text: shareText,
              url: url,
            });
            return;
          } catch (shareError) {
            // ì‚¬ìš©ìê°€ ì·¨ì†Œí•˜ê±°ë‚˜ ì‹¤íŒ¨í•œ ê²½ìš°
            if (shareError.name !== "AbortError") {
              console.log("Web Share API ì‹¤íŒ¨, ë§í¬ ë³µì‚¬ë¡œ ëŒ€ì²´");
            } else {
              return; // ì‚¬ìš©ìê°€ ì·¨ì†Œí•œ ê²½ìš°
            }
          }
        }

        // ì¹´ì¹´ì˜¤ SDKê°€ ìˆëŠ” ê²½ìš° ì‹œë„
        try {
          if (typeof Kakao !== "undefined" && Kakao.isInitialized()) {
            Kakao.Share.sendDefault({
              objectType: "feed",
              content: {
                title: localizedTitle,
                description: `${localizedDescription}\n\n${t("shareBody", {
                  title: localizedTitle,
                  description: localizedDescription,
                  url,
                })}`,
                imageUrl: url,
                link: {
                  mobileWebUrl: url,
                  webUrl: url,
                },
              },
              buttons: [
                {
                  title: t("shareKakaoButtonTitle"),
                  link: {
                    mobileWebUrl: url,
                    webUrl: url,
                  },
                },
              ],
            });
            return;
          }
        } catch (kakaoError) {
          console.log("ì¹´ì¹´ì˜¤ SDK ê³µìœ  ì‹¤íŒ¨, ë§í¬ ë³µì‚¬ë¡œ ëŒ€ì²´");
        }

        // í´ë°±: ë§í¬ ë³µì‚¬
        if (navigator.clipboard && navigator.clipboard.writeText) {
          try {
            await navigator.clipboard.writeText(shareText);
            alert(t("alertCopySuccess"));
          } catch (clipError) {
            // í´ë¦½ë³´ë“œ ì‹¤íŒ¨ ì‹œ ìˆ˜ë™ ë³µì‚¬
            fallbackCopyText(shareText);
          }
        } else {
          fallbackCopyText(shareText);
        }
      }

      // í´ë°± ë³µì‚¬ í•¨ìˆ˜
      function fallbackCopyText(text) {
        const textarea = document.createElement("textarea");
        textarea.value = text;
        textarea.style.position = "fixed";
        textarea.style.opacity = "0";
        document.body.appendChild(textarea);
        textarea.focus();
        textarea.select();
        try {
          document.execCommand("copy");
          alert(t("alertCopySuccess"));
        } catch (err) {
          alert(t("alertCopyFail", { text }));
        }
        document.body.removeChild(textarea);
      }

      // ë§í¬ ë³µì‚¬
      function copyLink() {
        if (!window.currentResult) {
          alert(t("alertNoResult"));
          return;
        }

        const url = window.location.href;
        const localizedTitle = localizeString(window.currentResult.template.title);
        const localizedDescription = localizeString(
          window.currentResult.template.description
        );
        const text = t("shareBody", {
          title: localizedTitle,
          description: localizedDescription,
          url,
        });

        if (navigator.clipboard && navigator.clipboard.writeText) {
          navigator.clipboard
            .writeText(text)
            .then(() => {
              alert(t("alertCopyLinkSuccess"));
            })
            .catch(() => {
              fallbackCopyText(text);
            });
        } else {
          fallbackCopyText(text);
        }
      }
    </script>
  
    
    <script>
      (function () {
        'use strict';
        const targetUrl = 'https://funnyfunny.cloud/';
        function addMoreTestsButton() {
          if (document.getElementById('more-tests-btn')) return;
          const moreBtn = document.createElement('button');
          moreBtn.id = 'more-tests-btn';
          moreBtn.type = 'button';
          moreBtn.dataset.url = targetUrl;
          moreBtn.dataset.i18n = 'moreTestsButton';
          moreBtn.textContent = t("moreTestsButton");
          moreBtn.className = 'more-tests-btn';
          moreBtn.addEventListener('click', function () {
            window.open(targetUrl, '_blank', 'noopener');
          });
          if (document.body) {
            document.body.appendChild(moreBtn);
          }
          if (typeof applyTranslations === 'function') {
            applyTranslations();
          }
        }
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', addMoreTestsButton);
        } else {
          addMoreTestsButton();
        }
      })();
    </script>


<ins class="adsbygoogle"
     style="display:block; text-align:center"
     data-ad-format="fluid"
     data-ad-layout-key="-6t+ed+2i-1n-4w"
     data-ad-client="ca-pub-1204894220949193"
     data-ad-slot="7300458753"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
    
</body>
</html>
